---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  tags?: string[];
}

const { title, description, pubDate, tags = [] } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-GB', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout title={title} description={description} ogType="article">
  <article class="post-wrapper">
    <div class="container--narrow">
      <header class="post-header">
        <a href="/blog" class="back-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
          All posts
        </a>
        <h1 class="post-title">{title}</h1>
        <div class="post-meta">
          <time datetime={pubDate.toISOString()}>{formattedDate}</time>
          {tags.length > 0 && (
            <ul class="tag-list" role="list">
              {tags.map(tag => <li><span class="tag">{tag}</span></li>)}
            </ul>
          )}
        </div>
      </header>

      <div class="prose">
        <slot />
      </div>
    </div>
  </article>
</BaseLayout>

<style>
  .post-wrapper {
    padding: 2.5rem 0 5rem;
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    color: var(--color-text-muted);
    font-size: 0.875rem;
    margin-bottom: 2rem;
    transition: color 0.15s;
  }

  .back-link:hover {
    color: var(--color-accent);
  }

  .post-title {
    font-size: clamp(1.6rem, 4vw, 2.25rem);
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  .post-meta {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.75rem;
    color: var(--color-text-muted);
    font-size: 0.875rem;
    margin-bottom: 2.5rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid var(--color-border);
  }

  .tag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
  }

  .tag {
    background: var(--color-tag-bg);
    color: var(--color-tag-text);
    border: 1px solid var(--color-tag-border);
    padding: 0.15rem 0.6rem;
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 500;
  }
</style>
